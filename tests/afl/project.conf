targets=config,test
cppflags_force=-I ../../include
ldflags_force=-static
cc=afl-gcc
dist=Makefile,config-input/config.conf

#targets
[config]
type=binary
sources=config.c

[test]
type=command
command=afl-fuzz -i config-input -o config-output -- $(OBJDIR)config @@
depends=$(OBJDIR)config,config-input/config.conf
phony=1
enabled=0

#sources
[config.c]
depends=../../src/array.c,../../src/config.c,../../src/error.c,../../src/hash.c,../../src/mutator.c,../../src/object.c,../../src/string.c
