targets=config,variable,test
cppflags_force=-I ../../include
ldflags_force=-static
cc=afl-gcc
dist=Makefile,config-input/config.conf,variable-input/bool-false.var,variable-input/bool-true.var,variable-input/buffer-empty.var,variable-input/double-zero.var,variable-input/float-zero.var,variable-input/int16_t-min.var,variable-input/int32_t-min.var,variable-input/int64_t-min.var,variable-input/int8_t-min.var,variable-input/null.var,variable-input/string-empty.var,variable-input/uint16_t-max.var,variable-input/uint32_t-max.var,variable-input/uint64_t-max.var,variable-input/uint8_t-max.var

#targets
[config]
type=binary
sources=config.c

[test]
type=command
command=afl-fuzz -i config-input -o config-output -- $(OBJDIR)config @@
depends=$(OBJDIR)config,config-input/config.conf
phony=1
enabled=0

[variable]
type=binary
sources=variable.c

#sources
[config.c]
depends=../../src/array.c,../../src/config.c,../../src/error.c,../../src/hash.c,../../src/mutator.c,../../src/object.c,../../src/string.c

[variable.c]
depends=../../src/array.c,../../src/buffer.c,../../src/error.c,../../src/object.c,../../src/string.c,../../src/variable.c
